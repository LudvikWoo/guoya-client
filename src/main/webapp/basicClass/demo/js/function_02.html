<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>刷新界面Demo</title>

<meta http-equiv="keywords" content="keyword1,keyword2,keyword3">
<meta http-equiv="description" content="this is my page">
<meta charset="UTF-8">
<style type="text/css">
body{
	background-color: #E8E8E8;

}
img {
	height: 20px;
}
#main_div{
}
.info_div{
	display: flex;
	width:20%;
	height: 10%;
	margin: 3% auto;
	background-color: white;
	padding:2%;
}
#info_div>div{
	margin:2%;
}
</style>
<script type="text/javascript">
	function changeStatus(sno){
		var img=document.getElementById(sno+"_img_id");
		var oldSrc=img.src;
		var status="";
		var newSrc="";
		if(oldSrc.indexOf("cross.jpg")!=-1){
			status=1;
			newSrc="../../images/icon/tick.jpg";
		}else{
			status=0;
			newSrc="../../images/icon/cross.jpg";
		}
		var url="http://127.0.0.1:8083/guoya-client/changeStatus?status="+status+"&sno="+sno;
		var xmlhttp = new XMLHttpRequest();
		xmlhttp.open("GET", url, true);
		xmlhttp.send();
		xmlhttp.onreadystatechange = function() {
			if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
				var result = xmlhttp.responseText;
				if(result.indexOf("success")!=-1){
					img.src=newSrc;
				}
			}else{
				img.src=newSrc;
			}
		};
	}
</script>
</head>

<body>
	<div id="main_div">
		<div class="info_div">
			<div>张三</div>
			<div>
				<img id="S0101_img_id" alt="" src="../../images/icon/cross.jpg" onclick="changeStatus('S0101')">
			</div>
		</div>
		<div class="info_div">
			<div>李四</div>
			<div>
				<img id="S0102_img_id" alt="" src="../../images/icon/cross.jpg" onclick="changeStatus('S0102')">
			</div>
		</div>
		<div class="info_div">
			<div>王二</div>
			<div>
				<img id="S0103_img_id" alt="" src="../../images/icon/cross.jpg" onclick="changeStatus('S0103')">
			</div>
		</div>
	</div>
</body>
</html>
